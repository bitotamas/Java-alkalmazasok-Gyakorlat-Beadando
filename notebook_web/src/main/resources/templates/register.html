<!DOCTYPE html>
<html lang="en"  xmlns:th="https://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/register.css">
  <link rel="icon" type="image/x-icon" href="/images/webicon.jpg">
  <title>Regisztráció</title>
</head>
<body>
<form th:action="@{/register_process}" th:object="${reg}" method="post">
  <div class="container">
    <h1>Regisztráció</h1>
    <div id="error-message"></div>
    <div th:if="${successContact}">
      <p style="color: green;" th:text="${successContact}"></p>
    </div>
    <p>Töltsd ki az adatokat</p>
    <hr>
    <label for="name"><b>Felhasználónév</b></label>
    <input  th:field="*{name}" type="text" placeholder="Név" name="name" id="name" required/>

    <label for="email"><b>Email</b></label>
    <input th:field="*{email}" type="text" placeholder="Email megadása" name="email" id="email" required>

    <label for="password"><b>Jelszó</b></label>
    <input th:field="*{password}" type="password" placeholder="Jelszó megadása" name="password" id="password" required>

    <label for="password-repeat"><b>Jelszó ismétlése</b></label>
    <input type="password" placeholder="Jelszó ismétlése" name="password-repeat" id="password-repeat" required>
    </hr>

    <p> <a href="">Terms & Privacy</a>.</p>
    <button type="submit" class="registerbtn">Regisztráció</button>
  </div>

  <div class="container signin">
    <p>Van már fiókod? <a href="/login">Lépj be</a>!</p>
    <p class="register-link"> <a href="/">Mégsem</a></p>
  </div>
</form>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
    const nameInput = document.getElementById("name");
    const emailInput = document.getElementById("email");
    const passwordInput = document.getElementById("password");
    const passwordRepeatInput = document.getElementById("password-repeat");
    const errorMessage = document.getElementById("error-message");

    form.addEventListener("submit", function (event) {
      let isValid = true;
      let messages = [];

      // Név ellenőrzése (min. 4 karakter)
      if (nameInput.value.length < 4) {
        //alert("A névnek minimum 4 karakterből kell állnia!");
        messages.push("A névnek minimum 4 karakterből kell állnia!")
        isValid = false;
      }

      // Email formátum ellenőrzés
      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailPattern.test(emailInput.value)) {
        //alert("Kérlek, adj meg egy érvényes email címet!");
        messages.push("Kérlek, adj meg egy érvényes email címet!")
        isValid = false;
      }

      // Jelszavak egyezésének ellenőrzése
      if (passwordInput.value !== passwordRepeatInput.value) {
        //alert("A két jelszónak egyeznie kell!");
        messages.push("A két jelszónak egyeznie kell!");
        isValid = false;
      }

      // Ha bármelyik feltétel nem teljesül, megakadályozza az űrlap elküldését
      if (!isValid) {
        event.preventDefault();
        errorMessage.style.display = "block;"
        errorMessage.style.color = "red";
        errorMessage.innerHTML = messages.join("<br>");
      }
    });
  });
</script>


</body>
</html>
